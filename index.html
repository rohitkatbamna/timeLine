<!DOCTYPE html>
<html>
	<head>
		<title>Timeline | groups | Groups ordering</title>

		<style>
			body,
			html {
				font-family: arial, sans-serif;
				font-size: 11pt;
			}

			#visualization {
				box-sizing: border-box;
				width: 100%;
				height: 300px;
			}
		</style>

		<script
			type="text/javascript"
			src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"
		></script>
		<link
			href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css"
			rel="stylesheet"
			type="text/css"
		/>
	</head>
	<body>
		<div id="TableIsHere"></div>

		<script type="text/javascript">
			// DOM element where the Timeline will be attached
			var container = document.getElementById("TableIsHere");
			function tConvert(time) {
				// Check correct time format and split into components
				const timeString12hr = new Date(
					"1970-01-01T" + time + "Z"
				).toLocaleTimeString("en-US", {
					timeZone: "UTC",
					hour12: true,
					hour: "numeric",
					minute: "numeric",
				}); // return adjusted time or original string
				return timeString12hr;
			}
			var obj;
			// fetching of json and passing it though a function
			fetch("./text.json")
				.then((res) => res.json())
				.then((data) => (obj = data))
				.then(() => createTimeline(obj));
			// Configuration for the Timeline

			function createTimeline(DataHere) {
				console.log(DataHere);
				var DataSetItem = [];
				for (let obj of DataHere.time_table_item) {
					let newData = {
						group: obj.venue_id,
						content: obj.faculty_name,
						start: obj.from,
						end: obj.to,
						title:
							"<h6>" +
							"Prof " +
							obj.faculty_name +
							" teaches <br />" +
							obj.topic,
					};
					DataSetItem.push(newData);
				}

				var items = new vis.DataSet(DataSetItem);
				var DataSetGroup = [];
				for (let obj of DataHere.venue) {
					let newData = {
						id: obj.venue_id,
						content:
							"<h4>" +
							tConvert(obj.from_time) +
							"<br/> to " +
							"<br/>" +
							tConvert(obj.to_time) +
							"</h4>",
						style: "font-weight:bold;font-family: sans-serif;color: crimson",
					};
					DataSetGroup.push(newData);
				}
				var groups = new vis.DataSet(DataSetGroup);

				var options = {
					width: "100%",
					timeAxis: { scale: "day", step: 2 },
					groupOrder: function (a, b) {
						return a.value - b.value;
					},
					zoomable: false,
					moveable: false,
					tooltip: {
						followMouse: true,
						delay: 0,
					},
					align: "center",
				};

				// Create a Timeline
				///
				///
				var timeline = new vis.Timeline(container, items, options, groups);
			}
		</script>
	</body>
</html>
